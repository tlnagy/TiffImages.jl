<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Writing TIFFs · TiffImages.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">TiffImages.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../reading/">Reading TIFFs</a></li><li class="is-active"><a class="tocitem" href>Writing TIFFs</a><ul class="internal"><li><a class="tocitem" href="#Converting-to-TiffImages.jl&#39;s-TIFF-type"><span>Converting to <code>TiffImages.jl</code>&#39;s TIFF type</span></a></li><li><a class="tocitem" href="#Manipulating-TIFF-Tags"><span>Manipulating TIFF Tags</span></a></li><li><a class="tocitem" href="#Saving-to-disk"><span>Saving to disk</span></a></li><li><a class="tocitem" href="#Strategies-for-saving-common-types"><span>Strategies for saving common types</span></a></li></ul></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../lib/public/">Public</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Extending</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lib/extend/">Overview</a></li><li><a class="tocitem" href="../../lib/extend/tags/">Built-in Tags</a></li></ul></li></ul></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Writing TIFFs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Writing TIFFs</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tlnagy/TiffImages.jl/blob/master/examples/writing.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Writing-TIFFs"><a class="docs-heading-anchor" href="#Writing-TIFFs">Writing TIFFs</a><a id="Writing-TIFFs-1"></a><a class="docs-heading-anchor-permalink" href="#Writing-TIFFs" title="Permalink"></a></h1><p>This page is a tutorial for saving TIFFs using TiffImages.jl and covers some common use cases</p><ul><li><a href="#Writing-TIFFs">Writing TIFFs</a></li><ul><li><a href="#Converting-to-TiffImages.jl&#39;s-TIFF-type">Converting to <code>TiffImages.jl</code>&#39;s TIFF type</a></li><li><a href="#Manipulating-TIFF-Tags">Manipulating TIFF Tags</a></li><li><a href="#Saving-to-disk">Saving to disk</a></li><li><a href="#Strategies-for-saving-common-types">Strategies for saving common types</a></li><ul><ul><li><a href="#Unsigned-Integers">Unsigned Integers</a></li><li><a href="#Floating-point-numbers">Floating point numbers</a></li><li><a href="#Signed-integers">Signed integers</a></li></ul></ul></ul></ul><p>You might want to write TIFFs to disk too. Now this can be done quite simply with TiffImages.jl. Say you have some AbstractArray type that you want to save, here we&#39;ll call it <code>data</code>:</p><pre><code class="language-julia">using Random
using Images # for nice inline images

Random.seed!(123)
data = rand(RGB{N0f8}, 10, 10)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAtRJREFUeAHtwV1rFgQcxuGfemeRojmVDCOoBaYMRRBWRtFBCUGv03aw1mQ49xBBJAaNCDNCau2g1UiEBjp6bAYVYaYmGmFI0SSV2YE0eiV6IYnIhSetPsEN9wf4X5daD17CO3XFC3in7uvAm3r2BN4HG3rwFq6ej7d4wRq85We/w7uwZB5e+1AXnigxUWKixESJiRITJSZKTJSYKDF1PzyD9033ON6bjw/i9a/dhNe2aS/e1KdH8Lq7F+Fd/0oP3jMH38P7/IcxPFFiosREiYkSEyUmSkyUmCgxUWJ6nlfxdp15AO/05BDeiuYevB1Tx/DGb/8Mb//HfXitLTfh/b18BO+NWz7CEyUmSkyUmCgxUWKixESJiRITJaaTrdN4nc3ZeO3nZvBm7enHe3HuOrzH3l+JNzrQwJu49Cfe9E/L8P54dCmeKDFRYqLERImJEhMlJkpMlJgoMfXufBJv6cmr8FraFuPtWteH98TwHXhTH27GGz0yivfu4D14xxqr8FZ9cSeeKDFRYqLERImJEhMlJkpMlJgoMV3cehxv4W1r8AZ+nY+389xRvG37tuMt++sXvH+mB/Da2r/Cu9z1CN7Xvd/jiRITJSZKTJSYKDFRYqLERImJEtPbzZfxnu6fjTc504u3evgCXsdrG/HGdvyId/fRvXi/b2vgzTm/BO/Az+N4osREiYkSEyUmSkyUmCgxUWKixPTJQAPvnZZOvPP7VuDNOTALb/LKa/Gu+XID3u7GRrynVj6EN/Pcerxbf+vDEyUmSkyUmCgxUWKixESJiRITJaa5172Ft/bMf3g9x0fwJk504S3aPIV341gH3pZ5nXiHdh/Ge+nQGF7z3wfxRImJEhMlJkpMlJgoMVFiosREiWmwYxhve8vVeKdvPovXt3893sRdN+AtGDqMNzjyLV7r/VvxLr7exLt3y2U8UWKixESJiRITJSZKTJSYKDFRYv8DdJGS+iGRkgEAAAAASUVORK5CYII=" /><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>TiffImages.jl only works with AbstractArrays with <code>eltype</code>s of <code>&lt;:Colorant</code> because the writer needs to know how to represent the image data on disk. Make sure to convert your <code>AbstractArrays</code> using before passing them. See the <a href="#Strategies-for-saving-common-types">common strategies</a> section below for tips.</p></div></div><h2 id="Converting-to-TiffImages.jl&#39;s-TIFF-type"><a class="docs-heading-anchor" href="#Converting-to-TiffImages.jl&#39;s-TIFF-type">Converting to <code>TiffImages.jl</code>&#39;s TIFF type</a><a id="Converting-to-TiffImages.jl&#39;s-TIFF-type-1"></a><a class="docs-heading-anchor-permalink" href="#Converting-to-TiffImages.jl&#39;s-TIFF-type" title="Permalink"></a></h2><p>Next lets convert <code>data</code> to a TIFF type</p><pre><code class="language-julia">using TiffImages
img = TiffImages.DenseTaggedImage(data)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAtRJREFUeAHtwV1rFgQcxuGfemeRojmVDCOoBaYMRRBWRtFBCUGv03aw1mQ49xBBJAaNCDNCau2g1UiEBjp6bAYVYaYmGmFI0SSV2YE0eiV6IYnIhSetPsEN9wf4X5daD17CO3XFC3in7uvAm3r2BN4HG3rwFq6ej7d4wRq85We/w7uwZB5e+1AXnigxUWKixESJiRITJSZKTJSYKDF1PzyD9033ON6bjw/i9a/dhNe2aS/e1KdH8Lq7F+Fd/0oP3jMH38P7/IcxPFFiosREiYkSEyUmSkyUmCgxUWJ6nlfxdp15AO/05BDeiuYevB1Tx/DGb/8Mb//HfXitLTfh/b18BO+NWz7CEyUmSkyUmCgxUWKixESJiRITJaaTrdN4nc3ZeO3nZvBm7enHe3HuOrzH3l+JNzrQwJu49Cfe9E/L8P54dCmeKDFRYqLERImJEhMlJkpMlJgoMfXufBJv6cmr8FraFuPtWteH98TwHXhTH27GGz0yivfu4D14xxqr8FZ9cSeeKDFRYqLERImJEhMlJkpMlJgoMV3cehxv4W1r8AZ+nY+389xRvG37tuMt++sXvH+mB/Da2r/Cu9z1CN7Xvd/jiRITJSZKTJSYKDFRYqLERImJEtPbzZfxnu6fjTc504u3evgCXsdrG/HGdvyId/fRvXi/b2vgzTm/BO/Az+N4osREiYkSEyUmSkyUmCgxUWKixPTJQAPvnZZOvPP7VuDNOTALb/LKa/Gu+XID3u7GRrynVj6EN/Pcerxbf+vDEyUmSkyUmCgxUWKixESJiRITJaa5172Ft/bMf3g9x0fwJk504S3aPIV341gH3pZ5nXiHdh/Ge+nQGF7z3wfxRImJEhMlJkpMlJgoMVFiosREiWmwYxhve8vVeKdvPovXt3893sRdN+AtGDqMNzjyLV7r/VvxLr7exLt3y2U8UWKixESJiRITJSZKTJSYKDFRYv8DdJGS+iGRkgEAAAAASUVORK5CYII=" /><p>Wait nothing happened! Hang with me, lets take a closer look at our new object using the <code>dump</code> command. We can see that there&#39;s now new information associated with our data! TiffImages.jl usually represents TIFF images as simply the data and associated tags that describe the data</p><pre><code class="language-julia">dump(img; maxdepth=1)</code></pre><pre class="documenter-example-output">TiffImages.DenseTaggedImage{RGB{N0f8}, 2, UInt32, Matrix{RGB{N0f8}}}
  data: Array{RGB{N0f8}}((10, 10))
  ifds: Array{TiffImages.IFD{UInt32}}((1,))</pre><p>The tags are organized as a vector of what are called <a href="https://www.awaresystems.be/imaging/tiff/faq.html">Image File Directories</a> (IFDs). For a simple 2D image like what we have, the IFDs will be stored a vector of length=1. For 3D images, the length of the IFDs vector will equal the length of the image in the third dimension.</p><p>Lets take a look at what tags there are:</p><pre><code class="language-julia">ifd = first(img.ifds) # since our data is 2D
ifd</code></pre><pre class="documenter-example-output">IFD, with tags: 
	Tag(IMAGEWIDTH, 10)
	Tag(IMAGELENGTH, 10)
	Tag(BITSPERSAMPLE, UInt16[8, 8, 8])
	Tag(PHOTOMETRIC, 2)
	Tag(SAMPLESPERPIXEL, 3)
	Tag(SAMPLEFORMAT, UInt16[1, 1, 1])</pre><h2 id="Manipulating-TIFF-Tags"><a class="docs-heading-anchor" href="#Manipulating-TIFF-Tags">Manipulating TIFF Tags</a><a id="Manipulating-TIFF-Tags-1"></a><a class="docs-heading-anchor-permalink" href="#Manipulating-TIFF-Tags" title="Permalink"></a></h2><p>These are some of the most basic tags that are required by the TIFF spec. We can even update it to add our own custom tags</p><pre><code class="language-julia">ifd[TiffImages.IMAGEDESCRIPTION] = &quot;This is very important data&quot;
ifd</code></pre><pre class="documenter-example-output">IFD, with tags: 
	Tag(IMAGEWIDTH, 10)
	Tag(IMAGELENGTH, 10)
	Tag(BITSPERSAMPLE, UInt16[8, 8, 8])
	Tag(PHOTOMETRIC, 2)
	Tag(IMAGEDESCRIPTION, &quot;This is very importa...&quot;)
	Tag(SAMPLESPERPIXEL, 3)
	Tag(SAMPLEFORMAT, UInt16[1, 1, 1])</pre><p>We can even add tags that aren&#39;t in the standard set in <a href="../../lib/extend/tags/#TiffImages.TiffTag"><code>TiffImages.TiffTag</code></a> as long as they are a <code>UInt16</code></p><pre><code class="language-julia">ifd[UInt16(34735)] = UInt16[1, 2, 3]
ifd</code></pre><pre class="documenter-example-output">IFD, with tags: 
	Tag(IMAGEWIDTH, 10)
	Tag(IMAGELENGTH, 10)
	Tag(BITSPERSAMPLE, UInt16[8, 8, 8])
	Tag(PHOTOMETRIC, 2)
	Tag(IMAGEDESCRIPTION, &quot;This is very importa...&quot;)
	Tag(SAMPLESPERPIXEL, 3)
	Tag(SAMPLEFORMAT, UInt16[1, 1, 1])
	Tag(UNKNOWN(34735), UInt16[1, 2, 3])</pre><p>We can also delete tags if we decide we don&#39;t want them:</p><pre><code class="language-julia">delete!(ifd, TiffImages.IMAGEDESCRIPTION)
ifd</code></pre><pre class="documenter-example-output">IFD, with tags: 
	Tag(IMAGEWIDTH, 10)
	Tag(IMAGELENGTH, 10)
	Tag(BITSPERSAMPLE, UInt16[8, 8, 8])
	Tag(PHOTOMETRIC, 2)
	Tag(SAMPLESPERPIXEL, 3)
	Tag(SAMPLEFORMAT, UInt16[1, 1, 1])
	Tag(UNKNOWN(34735), UInt16[1, 2, 3])</pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Careful with <code>delete!</code>, if any of core tags are deleted, TiffImages.jl and other readers might fail to read the file</p></div></div><h2 id="Saving-to-disk"><a class="docs-heading-anchor" href="#Saving-to-disk">Saving to disk</a><a id="Saving-to-disk-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-to-disk" title="Permalink"></a></h2><p>Once you&#39;re happy with your TIFF object, you can write it to disk as follows:</p><pre><code class="language-julia">TiffImages.save(&quot;test.tif&quot;, img)</code></pre><p>And to just double check, we can load it right back in</p><pre><code class="language-julia">TiffImages.load(&quot;test.tif&quot;)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAtRJREFUeAHtwV1rFgQcxuGfemeRojmVDCOoBaYMRRBWRtFBCUGv03aw1mQ49xBBJAaNCDNCau2g1UiEBjp6bAYVYaYmGmFI0SSV2YE0eiV6IYnIhSetPsEN9wf4X5daD17CO3XFC3in7uvAm3r2BN4HG3rwFq6ej7d4wRq85We/w7uwZB5e+1AXnigxUWKixESJiRITJSZKTJSYKDF1PzyD9033ON6bjw/i9a/dhNe2aS/e1KdH8Lq7F+Fd/0oP3jMH38P7/IcxPFFiosREiYkSEyUmSkyUmCgxUWJ6nlfxdp15AO/05BDeiuYevB1Tx/DGb/8Mb//HfXitLTfh/b18BO+NWz7CEyUmSkyUmCgxUWKixESJiRITJaaTrdN4nc3ZeO3nZvBm7enHe3HuOrzH3l+JNzrQwJu49Cfe9E/L8P54dCmeKDFRYqLERImJEhMlJkpMlJgoMfXufBJv6cmr8FraFuPtWteH98TwHXhTH27GGz0yivfu4D14xxqr8FZ9cSeeKDFRYqLERImJEhMlJkpMlJgoMV3cehxv4W1r8AZ+nY+389xRvG37tuMt++sXvH+mB/Da2r/Cu9z1CN7Xvd/jiRITJSZKTJSYKDFRYqLERImJEtPbzZfxnu6fjTc504u3evgCXsdrG/HGdvyId/fRvXi/b2vgzTm/BO/Az+N4osREiYkSEyUmSkyUmCgxUWKixPTJQAPvnZZOvPP7VuDNOTALb/LKa/Gu+XID3u7GRrynVj6EN/Pcerxbf+vDEyUmSkyUmCgxUWKixESJiRITJaa5172Ft/bMf3g9x0fwJk504S3aPIV341gH3pZ5nXiHdh/Ge+nQGF7z3wfxRImJEhMlJkpMlJgoMVFiosREiWmwYxhve8vVeKdvPovXt3893sRdN+AtGDqMNzjyLV7r/VvxLr7exLt3y2U8UWKixESJiRITJSZKTJSYKDFRYv8DdJGS+iGRkgEAAAAASUVORK5CYII=" /><h2 id="Strategies-for-saving-common-types"><a class="docs-heading-anchor" href="#Strategies-for-saving-common-types">Strategies for saving common types</a><a id="Strategies-for-saving-common-types-1"></a><a class="docs-heading-anchor-permalink" href="#Strategies-for-saving-common-types" title="Permalink"></a></h2><p>The general strategy for saving arrays will differ a bit depending on the type. The key step is the convert or reinterpret the arrays so that the elements are subtypes of <code>Colors.Colorant</code></p><h4 id="Unsigned-Integers"><a class="docs-heading-anchor" href="#Unsigned-Integers">Unsigned Integers</a><a id="Unsigned-Integers-1"></a><a class="docs-heading-anchor-permalink" href="#Unsigned-Integers" title="Permalink"></a></h4><p>Say you want to save a 3D array of small integers as grayscale values.</p><pre><code class="language-julia">data2 = rand(UInt8.(1:255), 5, 10)
eltype(data2)</code></pre><pre class="documenter-example-output">UInt8</pre><p>You can&#39;t directly save the <code>data2</code> since TiffImages.jl needs some color information to properly save the file. You can use <a href="https://docs.julialang.org/en/v1/base/arrays/#Base.reinterpret"><code>reinterpret</code></a> to accomplish this:</p><pre><code class="language-julia">grays = reinterpret(Gray{N0f8}, data2)
img2 = TiffImages.DenseTaggedImage(grays)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAABLCAAAAAC3yiHPAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAQlJREFUaAXNwTFKEAAARuE3vAM0dwAhCBqCRg/Q0OTkBRprc3QL3AWjG0iCs85BjoWbhzAIGhwC5/8G7/t8YDwyjhnfGD8YD4y/jAvGG8YXhiRJkiRJkiRJkiRJkiRJkiRJkiRJkpeMr4wTxkvGW8YR4z3jmPGPcc6QJEmSJEmSJEmSJEmSJEmSJEmSJEnyivGaccC4Z1wz/jB+M24Y/xkfGJIkSZIkSZIkSZIkSZIkSZIkSZIkSb5jfGfcMZ4YR4x7xhnjE+MV4wVDkiRJkiRJkiRJkiRJkiRJkiRJkiTJE8ZPxinjM+Oa8YtxyzhkHDA+MiRJkiRJkiRJkiRJkiRJkiRJkiRJkp4Bp5ocumdQDIkAAAAASUVORK5CYII=" /><p>Here the data are first reinterpreted as <code>N0f8</code>s, which is a <a href="https://github.com/JuliaMath/FixedPointNumbers.jl"><code>FixedPointNumber</code></a> then wrapped with a Gray type that marks this as a grayscale image. TiffImages.jl uses this information to update the TIFF tags</p><h4 id="Floating-point-numbers"><a class="docs-heading-anchor" href="#Floating-point-numbers">Floating point numbers</a><a id="Floating-point-numbers-1"></a><a class="docs-heading-anchor-permalink" href="#Floating-point-numbers" title="Permalink"></a></h4><p>With RGB we can reinterpret the first dimension of a 3D array as the 3 different color components (red, green, and blue):</p><pre><code class="language-julia">data = rand(Float64, 3, 5, 10);
colors = dropdims(reinterpret(RGB{eltype(data)}, data), dims=1) # drop first dimension
img3 = TiffImages.DenseTaggedImage(colors)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAABLCAIAAAAdw+lEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAc5JREFUeAHtwcFrDgAcxvHv4aE0L7X3Ig6UetWiHHbZ0rImi4PIwXpPoqS2cvE2tSKnN8ZhhZPkOEvNwWG9azdb4fRi5bCDlFbKRRG5+Bd+16eez0ed2TZl0/NjlO09dZyygeVNylY6uygbWv1F2cTkIco+7GhT1uoeo6w//I0yEeZEmBNhToQ5EeZEmBNhToQ5EeZEmBNhToQ5EeZEmNOFxR5lzc2flL26OUXZVP8fZXdOj1P27OsNyk5em6GsNTBB2drCKGVnLjUoE2FOhDkR5kSYE2FOhDkR5kSYE2FOhDkR5kSYE2FOhDm1Rl9Ttj34l7LuvXXKlsceUPbp/l3K2rc+UvZoZJGyPwsNyh7qHWUHHz+nTIQ5EeZEmBNhToQ5EeZEmBNhToQ5EeZEmBNhToQ5Eeb0Y6NJ2VrnO2Xjqy8oWxpeoezt+hJlVy/OUXZiZJCy/S+nKZubnKHs/HaXMhHmRJgTYU6EORHmRJgTYU6EORHmRJgTYU6EORHmRJhTb88+ys6d/U3ZE55SdqVxmLKtrT5lb5qfKXt/9DZl1w/0KPtyZDdls5d3UibCnAhzIsyJMCfCnAhzIsyJMCfCnAhzIsyJMCfCnAhz/wE6dkcNSz3lRAAAAABJRU5ErkJggg==" /><p>Here we dropped the first dimension since it was collapsed into the RGB type when we ran the <code>reinterpret</code> command.</p><h4 id="Signed-integers"><a class="docs-heading-anchor" href="#Signed-integers">Signed integers</a><a id="Signed-integers-1"></a><a class="docs-heading-anchor-permalink" href="#Signed-integers" title="Permalink"></a></h4><p>Say you want to save data that has negative integer values. In that case, you can&#39;t use <code>N0f8</code>, etc because those only worked for unsigned integers. You have to instead use <code>Q0f63</code>, etc, which is a different kind of fixed point number that uses one bit for the sign info (that&#39;s why it&#39;s <code>Q0f63</code>, not <code>Q0f64</code>!)</p><pre><code class="language-julia">data = rand(-100:100, 5, 5)</code></pre><pre class="documenter-example-output">5×5 Matrix{Int64}:
  63   81  -73   98   96
  63  -97   51   11   98
  58   70  -51   64   48
  86  100   45   27  -70
 -63   60   46  -12   65</pre><pre><code class="language-julia">img4 = TiffImages.DenseTaggedImage(reinterpret(Gray{Q0f63}, data))
println(img4.ifds[1])</code></pre><pre class="documenter-example-output">IFD, with tags:
	Tag(IMAGEWIDTH, 5)
	Tag(IMAGELENGTH, 5)
	Tag(BITSPERSAMPLE, 64)
	Tag(PHOTOMETRIC, 1)
	Tag(SAMPLESPERPIXEL, 1)
	Tag(SAMPLEFORMAT, 2)</pre><p>As you can see the <code>SAMPLEFORMATS</code> and <code>BITSPERSAMPLE</code> tags correctly updated to show that this TIFF contains signed integers and 64-bit data, respectively.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Currently, several of the display libraries struggle with showing <code>Colorant</code>s backed by a signed type so you might run into errors, but the data will still save properly</p></div></div><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../reading/">« Reading TIFFs</a><a class="docs-footer-nextpage" href="../../lib/public/">Public »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 28 April 2021 19:58">Wednesday 28 April 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
