<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Writing TIFFs · TiffImages.jl</title><meta name="title" content="Writing TIFFs · TiffImages.jl"/><meta property="og:title" content="Writing TIFFs · TiffImages.jl"/><meta property="twitter:title" content="Writing TIFFs · TiffImages.jl"/><meta name="description" content="Documentation for TiffImages.jl."/><meta property="og:description" content="Documentation for TiffImages.jl."/><meta property="twitter:description" content="Documentation for TiffImages.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><script src="https://analytics.tamasnagy.com/js/script.js" data-domain="tamasnagy.com" defer></script><link href="../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="TiffImages.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TiffImages.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../reading/">Reading TIFFs</a></li><li class="is-active"><a class="tocitem" href>Writing TIFFs</a><ul class="internal"><li><a class="tocitem" href="#Simple-cases"><span>Simple cases</span></a></li><li><a class="tocitem" href="#Complex-cases"><span>Complex cases</span></a></li><li><a class="tocitem" href="#Strategies-for-saving-common-types"><span>Strategies for saving common types</span></a></li></ul></li><li><a class="tocitem" href="../mmap_lazyio/">Lazy TIFFs</a></li></ul></li><li><a class="tocitem" href="../../demos/">Demos</a></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../lib/public/">Public</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Extending</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lib/extend/">Overview</a></li><li><a class="tocitem" href="../../lib/extend/tags/">Built-in Tags</a></li></ul></li></ul></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Writing TIFFs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Writing TIFFs</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/tlnagy/TiffImages.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/tlnagy/TiffImages.jl/blob/master/examples/writing.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Writing-TIFFs"><a class="docs-heading-anchor" href="#Writing-TIFFs">Writing TIFFs</a><a id="Writing-TIFFs-1"></a><a class="docs-heading-anchor-permalink" href="#Writing-TIFFs" title="Permalink"></a></h1><p>This page is a tutorial for saving TIFFs using TiffImages.jl and covers some common use cases</p><ul><li><a href="#Writing-TIFFs">Writing TIFFs</a></li><li class="no-marker"><ul><li><a href="#Simple-cases">Simple cases</a></li><li><a href="#Complex-cases">Complex cases</a></li><li class="no-marker"><ul><li><a href="#Converting-to-TiffImages.jl&#39;s-TIFF-type">Converting to <code>TiffImages.jl</code>&#39;s TIFF type</a></li><li><a href="#Manipulating-TIFF-Tags">Manipulating TIFF Tags</a></li><li><a href="#Saving-to-disk">Saving to disk</a></li></ul></li><li><a href="#Strategies-for-saving-common-types">Strategies for saving common types</a></li><li class="no-marker"><ul><li class="no-marker"><ul><li><a href="#Unsigned-Integers">Unsigned Integers</a></li><li><a href="#Floating-point-numbers">Floating point numbers</a></li><li><a href="#Signed-integers">Signed integers</a></li></ul></li></ul></li></ul></li></ul><p>You might want to write TIFFs to disk too. Now this can be done quite simply with TiffImages.jl. Say you have some AbstractArray type that you want to save, here we&#39;ll call it <code>data</code>:</p><pre><code class="language-julia hljs">using Random
using Images # for nice inline images

Random.seed!(123)
data = rand(RGB{N0f8}, 10, 10)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAtJJREFUeAHtwV1rFgQcxuEfeFuKWEQozjfCCCGIYqQHzilbmSZak5pBut5mC6KgqINKMGMkSbGVmE8nTwepRGONpqwCX6DIg0BqkWs6CZwnSlQsgoiI7BPc8P8A93Vp5lfhrWxM4316YyveRM9evKmBAbxD3/fh9axtxet69QrekV3deE/+8i6eiDIRZSLKRJSJKBNRJqJMRJmIMt08vRbv49lr8BaffQdvQ+/reIvXP4A3suwa3rMTM3iLum7HOzX0IN7KqW48EWUiykSUiSgTUSaiTESZiDIRZWLJabzuL//Dm/XCArzJW1bhfXPpDF7HD214HzQbeHe0v4R3fGI+XrPZhyeiTESZiDIRZSLKRJSJKBNRJqJMi1ZdwevYdxRv/LM5eP2nVuOdfWg/3v62F/H+vLwX77fDo3i9X3Xgfa738USUiSgTUSaiTESZiDIRZSLKRJRp7uhhvMs//4032D6Md3H1fLxdkyN4Ix+N4e0YuhvvnzN/4E3d/zJe/9XteCLKRJSJKBNRJqJMRJmIMhFlIsq0dfkgXv/JdXgjO7vxjrYvwBt85BW8zW914o0tWYO3Qy14U7sv4D3auQlPRJmIMhFlIspElIkoE1EmokxEmR57bzNe89xsvDcONfBm1m3De3zpcbyxq5N4B7uew9uycBve84278Gb9+DueiDIRZSLKRJSJKBNRJqJMRJmIMh15pgfvwIYP8eY+vAKv95MTeEsvXcAb3X4f3vCcb/GG/t2N17vxTbytx27FE1EmokxEmYgyEWUiykSUiSgTUaZlNz2N98S9LXjnV5zH67x4Hd7O0y1409ffgHdsfA/ewME9ePf81Ie371oPnogyEWUiykSUiSgTUSaiTESZiDK1jZ/Em9f/F96W5hd4B1qfwmss/BrvxPA5vNs2vY03s3w93mt3zsPb+N0knogyEWUiykSUiSgTUSaiTESZiLL/AZbRkmolIIpmAAAAAElFTkSuQmCC"><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>TiffImages.jl only works with AbstractArrays with <code>eltype</code>s of <code>&lt;:ColorOrTuple</code> because the writer needs to know how to represent the image data on disk. Make sure to convert your <code>AbstractArrays</code> using before passing them. See the <a href="#Strategies-for-saving-common-types">common strategies</a> section below for tips.</p></div></div><h2 id="Simple-cases"><a class="docs-heading-anchor" href="#Simple-cases">Simple cases</a><a id="Simple-cases-1"></a><a class="docs-heading-anchor-permalink" href="#Simple-cases" title="Permalink"></a></h2><p>In most simple cases, all you need to do is use the <code>save</code> function</p><pre><code class="language-julia hljs">using TiffImages
TiffImages.save(&quot;test.tif&quot;, data)</code></pre><p>That&#39;s it! TiffImages will convert your data into its own internal file type and then rapidly write it to disk. See the &quot;Incremental writing&quot; section of <a href="../mmap_lazyio/#Lazy-TIFFs">Lazy TIFFs</a> for building a TIFF piece by piece.</p><h2 id="Complex-cases"><a class="docs-heading-anchor" href="#Complex-cases">Complex cases</a><a id="Complex-cases-1"></a><a class="docs-heading-anchor-permalink" href="#Complex-cases" title="Permalink"></a></h2><p>If you need more fine-grained control over what tags are included when the image is written, this section is for you!</p><h3 id="Converting-to-TiffImages.jl&#39;s-TIFF-type"><a class="docs-heading-anchor" href="#Converting-to-TiffImages.jl&#39;s-TIFF-type">Converting to <code>TiffImages.jl</code>&#39;s TIFF type</a><a id="Converting-to-TiffImages.jl&#39;s-TIFF-type-1"></a><a class="docs-heading-anchor-permalink" href="#Converting-to-TiffImages.jl&#39;s-TIFF-type" title="Permalink"></a></h3><p>Next lets convert <code>data</code> to a TIFF type</p><pre><code class="language-julia hljs">using TiffImages
img = TiffImages.DenseTaggedImage(data)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAtJJREFUeAHtwV1rFgQcxuEfeFuKWEQozjfCCCGIYqQHzilbmSZak5pBut5mC6KgqINKMGMkSbGVmE8nTwepRGONpqwCX6DIg0BqkWs6CZwnSlQsgoiI7BPc8P8A93Vp5lfhrWxM4316YyveRM9evKmBAbxD3/fh9axtxet69QrekV3deE/+8i6eiDIRZSLKRJSJKBNRJqJMRJmIMt08vRbv49lr8BaffQdvQ+/reIvXP4A3suwa3rMTM3iLum7HOzX0IN7KqW48EWUiykSUiSgTUSaiTESZiDIRZWLJabzuL//Dm/XCArzJW1bhfXPpDF7HD214HzQbeHe0v4R3fGI+XrPZhyeiTESZiDIRZSLKRJSJKBNRJqJMi1ZdwevYdxRv/LM5eP2nVuOdfWg/3v62F/H+vLwX77fDo3i9X3Xgfa738USUiSgTUSaiTESZiDIRZSLKRJRp7uhhvMs//4032D6Md3H1fLxdkyN4Ix+N4e0YuhvvnzN/4E3d/zJe/9XteCLKRJSJKBNRJqJMRJmIMhFlIsq0dfkgXv/JdXgjO7vxjrYvwBt85BW8zW914o0tWYO3Qy14U7sv4D3auQlPRJmIMhFlIspElIkoE1EmokxEmR57bzNe89xsvDcONfBm1m3De3zpcbyxq5N4B7uew9uycBve84278Gb9+DueiDIRZSLKRJSJKBNRJqJMRJmIMh15pgfvwIYP8eY+vAKv95MTeEsvXcAb3X4f3vCcb/GG/t2N17vxTbytx27FE1EmokxEmYgyEWUiykSUiSgTUaZlNz2N98S9LXjnV5zH67x4Hd7O0y1409ffgHdsfA/ewME9ePf81Ie371oPnogyEWUiykSUiSgTUSaiTESZiDK1jZ/Em9f/F96W5hd4B1qfwmss/BrvxPA5vNs2vY03s3w93mt3zsPb+N0knogyEWUiykSUiSgTUSaiTESZiLL/AZbRkmolIIpmAAAAAElFTkSuQmCC"><p>Wait nothing happened! Hang with me, lets take a closer look at our new object using the <code>dump</code> command. We can see that there&#39;s now new information associated with our data! TiffImages.jl usually represents TIFF images as simply the data and associated tags that describe the data</p><pre><code class="language-julia hljs">dump(img; maxdepth=1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TiffImages.DenseTaggedImage{RGB{N0f8}, 2, UInt32, Matrix{RGB{N0f8}}}
  data: Array{RGB{N0f8}}((10, 10))
  ifds: Array{TiffImages.IFD{UInt32}}((1,))</code></pre><p>The tags are organized as a vector of what are called <a href="https://www.awaresystems.be/imaging/tiff/faq.html">Image File Directories</a> (IFDs). For a simple 2D image like what we have, the IFDs will be stored a vector of length=1. For 3D images, the length of the IFDs vector will equal the length of the image in the third dimension.</p><p>Lets take a look at what tags there are:</p><pre><code class="language-julia hljs">ifd = ifds(img) # returns a single IFD since our data is 2D</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">IFD, with tags: 
	Tag(IMAGEWIDTH, 10)
	Tag(IMAGELENGTH, 10)
	Tag(BITSPERSAMPLE, UInt16[8, 8, 8])
	Tag(PHOTOMETRIC, 2)
	Tag(SAMPLESPERPIXEL, 3)
	Tag(SAMPLEFORMAT, UInt16[1, 1, 1])</code></pre><h3 id="Manipulating-TIFF-Tags"><a class="docs-heading-anchor" href="#Manipulating-TIFF-Tags">Manipulating TIFF Tags</a><a id="Manipulating-TIFF-Tags-1"></a><a class="docs-heading-anchor-permalink" href="#Manipulating-TIFF-Tags" title="Permalink"></a></h3><p>These are some of the most basic tags that are required by the TIFF spec. We can even update it to add our own custom tags</p><pre><code class="language-julia hljs">ifd[TiffImages.IMAGEDESCRIPTION] = &quot;This is very important data&quot;
ifd</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">IFD, with tags: 
	Tag(IMAGEWIDTH, 10)
	Tag(IMAGELENGTH, 10)
	Tag(BITSPERSAMPLE, UInt16[8, 8, 8])
	Tag(PHOTOMETRIC, 2)
	Tag(IMAGEDESCRIPTION, &quot;This is very importa...&quot;)
	Tag(SAMPLESPERPIXEL, 3)
	Tag(SAMPLEFORMAT, UInt16[1, 1, 1])</code></pre><p>We can even add tags that aren&#39;t in the standard set in <a href="../../lib/extend/tags/#TiffImages.TiffTag"><code>TiffImages.TiffTag</code></a> as long as they are a <code>UInt16</code></p><pre><code class="language-julia hljs">ifd[UInt16(34735)] = UInt16[1, 2, 3]
ifd</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">IFD, with tags: 
	Tag(IMAGEWIDTH, 10)
	Tag(IMAGELENGTH, 10)
	Tag(BITSPERSAMPLE, UInt16[8, 8, 8])
	Tag(PHOTOMETRIC, 2)
	Tag(IMAGEDESCRIPTION, &quot;This is very importa...&quot;)
	Tag(SAMPLESPERPIXEL, 3)
	Tag(SAMPLEFORMAT, UInt16[1, 1, 1])
	Tag(GEOKEYDIRECTORY, UInt16[1, 2, 3])</code></pre><p>We can also delete tags if we decide we don&#39;t want them:</p><pre><code class="language-julia hljs">delete!(ifd, TiffImages.IMAGEDESCRIPTION)
ifd</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">IFD, with tags: 
	Tag(IMAGEWIDTH, 10)
	Tag(IMAGELENGTH, 10)
	Tag(BITSPERSAMPLE, UInt16[8, 8, 8])
	Tag(PHOTOMETRIC, 2)
	Tag(SAMPLESPERPIXEL, 3)
	Tag(SAMPLEFORMAT, UInt16[1, 1, 1])
	Tag(GEOKEYDIRECTORY, UInt16[1, 2, 3])</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Careful with <code>delete!</code>, if any of core tags are deleted, TiffImages.jl and other readers might fail to read the file</p></div></div><h3 id="Saving-to-disk"><a class="docs-heading-anchor" href="#Saving-to-disk">Saving to disk</a><a id="Saving-to-disk-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-to-disk" title="Permalink"></a></h3><p>Once you&#39;re happy with your TIFF object, you can write it to disk as follows:</p><pre><code class="language-julia hljs">TiffImages.save(&quot;test.tif&quot;, img)</code></pre><p>And to just double check, we can load it right back in</p><pre><code class="language-julia hljs">TiffImages.load(&quot;test.tif&quot;)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAtJJREFUeAHtwV1rFgQcxuEfeFuKWEQozjfCCCGIYqQHzilbmSZak5pBut5mC6KgqINKMGMkSbGVmE8nTwepRGONpqwCX6DIg0BqkWs6CZwnSlQsgoiI7BPc8P8A93Vp5lfhrWxM4316YyveRM9evKmBAbxD3/fh9axtxet69QrekV3deE/+8i6eiDIRZSLKRJSJKBNRJqJMRJmIMt08vRbv49lr8BaffQdvQ+/reIvXP4A3suwa3rMTM3iLum7HOzX0IN7KqW48EWUiykSUiSgTUSaiTESZiDIRZWLJabzuL//Dm/XCArzJW1bhfXPpDF7HD214HzQbeHe0v4R3fGI+XrPZhyeiTESZiDIRZSLKRJSJKBNRJqJMi1ZdwevYdxRv/LM5eP2nVuOdfWg/3v62F/H+vLwX77fDo3i9X3Xgfa738USUiSgTUSaiTESZiDIRZSLKRJRp7uhhvMs//4032D6Md3H1fLxdkyN4Ix+N4e0YuhvvnzN/4E3d/zJe/9XteCLKRJSJKBNRJqJMRJmIMhFlIsq0dfkgXv/JdXgjO7vxjrYvwBt85BW8zW914o0tWYO3Qy14U7sv4D3auQlPRJmIMhFlIspElIkoE1EmokxEmR57bzNe89xsvDcONfBm1m3De3zpcbyxq5N4B7uew9uycBve84278Gb9+DueiDIRZSLKRJSJKBNRJqJMRJmIMh15pgfvwIYP8eY+vAKv95MTeEsvXcAb3X4f3vCcb/GG/t2N17vxTbytx27FE1EmokxEmYgyEWUiykSUiSgTUaZlNz2N98S9LXjnV5zH67x4Hd7O0y1409ffgHdsfA/ewME9ePf81Ie371oPnogyEWUiykSUiSgTUSaiTESZiDK1jZ/Em9f/F96W5hd4B1qfwmss/BrvxPA5vNs2vY03s3w93mt3zsPb+N0knogyEWUiykSUiSgTUSaiTESZiLL/AZbRkmolIIpmAAAAAElFTkSuQmCC"><h2 id="Strategies-for-saving-common-types"><a class="docs-heading-anchor" href="#Strategies-for-saving-common-types">Strategies for saving common types</a><a id="Strategies-for-saving-common-types-1"></a><a class="docs-heading-anchor-permalink" href="#Strategies-for-saving-common-types" title="Permalink"></a></h2><p>The general strategy for saving arrays will differ a bit depending on the type. The key step is the convert or reinterpret the arrays so that the elements are subtypes of <code>ColorOrTuple</code></p><h4 id="Unsigned-Integers"><a class="docs-heading-anchor" href="#Unsigned-Integers">Unsigned Integers</a><a id="Unsigned-Integers-1"></a><a class="docs-heading-anchor-permalink" href="#Unsigned-Integers" title="Permalink"></a></h4><p>Say you want to save a 3D array of small integers as grayscale values.</p><pre><code class="language-julia hljs">data2 = rand(UInt8.(1:255), 5, 10)
eltype(data2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">UInt8</code></pre><p>You can&#39;t directly save the <code>data2</code> since TiffImages.jl needs some color information to properly save the file. You can use <a href="https://docs.julialang.org/en/v1/base/arrays/#Base.reinterpret"><code>reinterpret</code></a> to accomplish this:</p><pre><code class="language-julia hljs">grays = reinterpret(Gray{N0f8}, data2)
img2 = TiffImages.DenseTaggedImage(grays)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAABLCAAAAAC3yiHPAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAQNJREFUaAXNwaFOFgAARtEbbjRhsBh9B4KFYqb/M2GkszGS259MWplBfQEegmzGzSfgBSBQzF8x33N8zfjNeM/4wPjMuGO8MM4YfxhXDEmSJEmSJEmSJEmSJEmSJEmSJEmSJB8YB8YN4w3jC+MV45z/OWE8MSRJkiRJkiRJkiRJkiRJkiRJkiRJkrxm/GI8Mt4y7hkfGWeMb4wD4ytDkiRJkiRJkiRJkiRJkiRJkiRJkiTJC8Yz45Jxw7hnvGP8ZRwZR8aRIUmSJEmSJEmSJEmSJEmSJEmSJEmS5HfGgfGT8cD4xDhlPDJuGSeMHwxJkiRJkiRJkiRJkiRJkiRJkiRJkqR/xiMZuvLpHYYAAAAASUVORK5C"><p>Here the data are first reinterpreted as <code>N0f8</code>s, which is a <a href="https://github.com/JuliaMath/FixedPointNumbers.jl"><code>FixedPointNumber</code></a> then wrapped with a Gray type that marks this as a grayscale image. TiffImages.jl uses this information to update the TIFF tags</p><h4 id="Floating-point-numbers"><a class="docs-heading-anchor" href="#Floating-point-numbers">Floating point numbers</a><a id="Floating-point-numbers-1"></a><a class="docs-heading-anchor-permalink" href="#Floating-point-numbers" title="Permalink"></a></h4><p>With RGB we can reinterpret the first dimension of a 3D array as the 3 different color components (red, green, and blue):</p><pre><code class="language-julia hljs">data = rand(Float64, 3, 5, 10);
colors = dropdims(reinterpret(RGB{eltype(data)}, data), dims=1) # drop first dimension
img3 = TiffImages.DenseTaggedImage(colors)</code></pre><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAABLCAIAAAAdw+lEAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAc5JREFUeAHtwc9rDgAcx/F3+ZyctdRycJilpo3n4OKC0spR+ZFNcXAw9uMwp0X5caNQ5vCkcZRC7LCbZNMokq1x2GUtScuTWj2lxvwL3+unPq+Xxt6/o2zm4yxl8zf3U/Zk/ANl/V++UzY9s0bZiy1dlJ37fYeyQ/falP1c36BMhDkR5kSYE2FOhDkR5kSYE2FOhDkR5kSYE2FOhDkR5rSje4Wy5d1LlHV+nqBsrjFB2bOnRylrH1mjbLpvmbLh+zsp061eyi5em6RMhDkR5kSYE2FOhDkR5kSYE2FOhDkR5kSYE2FOhDkR5rQ036Zs9O82yi4cu01Zo+s6ZQe2nqJsdXQfZSe//aLs4ZUxyqYmf1B29+UgZSLMiTAnwpwIcyLMiTAnwpwIcyLMiTAnwpwIcyLMiTCn4TdNyhrNHspaIwOUre/toOzG4mXKrq58ouz86QHK5npalA0+WKDs7Nd+ykSYE2FOhDkR5kSYE2FOhDkR5kSYE2FOhDkR5kSYE2FO7cMtyi5N/aOs+ahB2ebxIcpm9wxRtnmij7LuV38oO3NwkbK32x9T9vr5LspEmBNhToQ5EeZEmBNhToQ5EeZEmBNhToQ5EeZEmBNh7j+R7FOxf3z52wAAAABJRU5ErkJg"><p>Here we dropped the first dimension since it was collapsed into the RGB type when we ran the <code>reinterpret</code> command.</p><h4 id="Signed-integers"><a class="docs-heading-anchor" href="#Signed-integers">Signed integers</a><a id="Signed-integers-1"></a><a class="docs-heading-anchor-permalink" href="#Signed-integers" title="Permalink"></a></h4><p>Say you want to save data that has negative integer values. In that case, you can&#39;t use <code>N0f8</code>, etc because those only worked for unsigned integers. You have to instead use <code>Q0f63</code>, etc, which is a different kind of fixed point number that uses one bit for the sign info (that&#39;s why it&#39;s <code>Q0f63</code>, not <code>Q0f64</code>!)</p><pre><code class="language-julia hljs">data = rand(-100:100, 5, 5)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">5×5 Matrix{Int64}:
  25   18   84  -67  -74
  87   34  -23   22  100
 -93   63   -2  -16   63
 -96  -65  -80  -99   98
  11  -59  -57   17   -6</code></pre><pre><code class="language-julia hljs">img4 = TiffImages.DenseTaggedImage(reinterpret(Gray{Q0f63}, data))
println(ifds(img4))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">IFD, with tags:
	Tag(IMAGEWIDTH, 5)
	Tag(IMAGELENGTH, 5)
	Tag(BITSPERSAMPLE, 64)
	Tag(PHOTOMETRIC, 1)
	Tag(SAMPLESPERPIXEL, 1)
	Tag(SAMPLEFORMAT, 2)</code></pre><p>As you can see the <code>SAMPLEFORMATS</code> and <code>BITSPERSAMPLE</code> tags correctly updated to show that this TIFF contains signed integers and 64-bit data, respectively.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Currently, several of the display libraries struggle with showing <code>Colorant</code>s backed by a signed type so you might run into errors, but the data will still save properly</p></div></div><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../reading/">« Reading TIFFs</a><a class="docs-footer-nextpage" href="../mmap_lazyio/">Lazy TIFFs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Thursday 23 January 2025 09:53">Thursday 23 January 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
