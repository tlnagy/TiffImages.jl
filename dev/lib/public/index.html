<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public · TiffImages.jl</title><meta name="title" content="Public · TiffImages.jl"/><meta property="og:title" content="Public · TiffImages.jl"/><meta property="twitter:title" content="Public · TiffImages.jl"/><meta name="description" content="Documentation for TiffImages.jl."/><meta property="og:description" content="Documentation for TiffImages.jl."/><meta property="twitter:description" content="Documentation for TiffImages.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><script src="https://analytics.tamasnagy.com/js/script.js" data-domain="tamasnagy.com" defer></script><link href="../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="TiffImages.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TiffImages.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/reading/">Reading TIFFs</a></li><li><a class="tocitem" href="../../examples/writing/">Writing TIFFs</a></li><li><a class="tocitem" href="../../examples/mmap_lazyio/">Lazy TIFFs</a></li></ul></li><li><a class="tocitem" href="../../demos/">Demos</a></li><li><span class="tocitem">Library</span><ul><li class="is-active"><a class="tocitem" href>Public</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Extending</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../extend/">Overview</a></li><li><a class="tocitem" href="../extend/tags/">Built-in Tags</a></li></ul></li></ul></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>Public</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/tlnagy/TiffImages.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/tlnagy/TiffImages.jl/blob/master/docs/src/lib/public.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-interface"><a class="docs-heading-anchor" href="#Public-interface">Public interface</a><a id="Public-interface-1"></a><a class="docs-heading-anchor-permalink" href="#Public-interface" title="Permalink"></a></h1><h3 id="Reading/Writing"><a class="docs-heading-anchor" href="#Reading/Writing">Reading/Writing</a><a id="Reading/Writing-1"></a><a class="docs-heading-anchor-permalink" href="#Reading/Writing" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TiffImages.load" href="#TiffImages.load"><code>TiffImages.load</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load(filepath; mode, kwargs...)
</code></pre><p>Loads a TIFF image. Optional flags <code>verbose</code>, <code>lazyio</code>, and <code>mmap</code> are set to true, false, and false by default, respectively. Setting <code>verbose</code> to false will hide the loading bar, while setting either <code>lazyio</code> or <code>mmap</code> to true defer loading until the data are needed (by either of two mechanisms).</p><p>Parallelism is enabled by default, but can be disabled by setting <code>JULIA_IMAGES_PARALLEL</code>=false in your environment</p><p>Loading images with a large number of channels may result in a noticeable delay on the first load (up to several minutes for hundreds or thousands of channels)</p><p>See <a href="../../examples/mmap_lazyio/#Lazy-TIFFs">Lazy TIFFs</a> for more details about memory-mapping and lazy I/O.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/load.jl#L3-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TiffImages.save" href="#TiffImages.save"><code>TiffImages.save</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save(io, data)</code></pre><p>Write data to <code>io</code>, if data is a <code>DenseTaggedImage</code> then any custom tags are also written to the file, otherwise a minimal set of tags are added to make the data readable by other TIFF engines.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/dense.jl#L205-L211">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TiffImages.color" href="#TiffImages.color"><code>TiffImages.color</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">color(img::AbstractTIFF{ &lt;: WidePixel}; alpha)</code></pre><p>Extract the color channels from multispectral image <code>img</code></p><p>The optional <code>alpha</code> parameter allows an arbitrary channel to be used as the alpha channel</p><pre><code class="language-julia-repl hljs">julia&gt; img = DenseTaggedImage(WidePixel.([rand(RGB{Float32}) for x in 1:256, y in 1:256], [(rand(Float32),) for x in 1:256, y in 1:256]));

julia&gt; eltype(img)
WidePixel{RGB{Float32}, Tuple{Float32}}

julia&gt; nchannels(img)
4

julia&gt; eltype(color(img; alpha=4)) # use the fourth channel as an alpha channel
RGBA{Float32}</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/common.jl#L93-L112">source</a></section><section><div><pre><code class="language-julia hljs">color(img::AbstractTIFF)</code></pre><p>This is an identity relation that just returns <code>img</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/common.jl#L115-L119">source</a></section><section><div><pre><code class="language-julia hljs">color(x::WidePixel; alpha)</code></pre><p>Return the value of the <code>color</code> field of <code>x</code></p><p>The optional <code>alpha</code> parameter allows an arbitrary channel to be used as the alpha channel</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/common.jl#L122-L128">source</a></section><section><div><pre><code class="language-julia hljs">color(x::Colorant)</code></pre><p>This is an identity relation that just returns <code>x</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/common.jl#L133-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TiffImages.nchannels" href="#TiffImages.nchannels"><code>TiffImages.nchannels</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nchannels(img::AbstractTIFF)</code></pre><p>Return the number of channels in each pixel</p><p>For example, an image with RGB pixels has 3 channels</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/common.jl#L80-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TiffImages.channel" href="#TiffImages.channel"><code>TiffImages.channel</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">channel(img, i)</code></pre><p>Get the <code>i</code>&#39;th channel of data from <code>img</code></p><p>For example, <code>channel(img, 2)</code> would yield the green channel of an RGB image, or the (unlabeled) second channel of a multispectral image</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/common.jl#L64-L72">source</a></section></article><h3 id="Output-Types"><a class="docs-heading-anchor" href="#Output-Types">Output Types</a><a id="Output-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Output-Types" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TiffImages.DenseTaggedImage" href="#TiffImages.DenseTaggedImage"><code>TiffImages.DenseTaggedImage</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct DenseTaggedImage{T, N, O&lt;:Unsigned, AA&lt;:AbstractArray} &lt;: TiffImages.AbstractDenseTIFF{T, N}</code></pre><p>The most common TIFF structure that associates an Image File Directory, aka <a href="../extend/#TiffImages.IFD"><code>TiffImages.IFD</code></a>, with each XY image slice.</p><pre><code class="language-julia-repl hljs">julia&gt; img = TiffImages.DenseTaggedImage(Gray.(zeros(UInt8, 10, 10)));

julia&gt; size(img)
(10, 10)

julia&gt; ifds(img)
IFD, with tags: 
	Tag(IMAGEWIDTH, 10)
	Tag(IMAGELENGTH, 10)
	Tag(BITSPERSAMPLE, 8)
	Tag(PHOTOMETRIC, 1)
	Tag(SAMPLESPERPIXEL, 1)
	Tag(SAMPLEFORMAT, 1)

julia&gt; ifds(img)[TiffImages.XRESOLUTION] = 0x00000014//0x00000064 # write custom data
0x00000001//0x00000005

julia&gt; TiffImages.save(mktemp()[2], img); # write to temp file</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Currently, when writing custom info to tags, play attention to the types expected by other TIFF engines. For example, <a href="https://www.awaresystems.be/imaging/tiff/tifftags/xresolution.html"><code>XRESOLUTION</code></a> above expects a <code>rational</code> by default, which is equivalent to the Julian <code>Rational{UInt32}</code></p></div></div><p>See also <a href="#TiffImages.load"><code>TiffImages.load</code></a> and <a href="#TiffImages.save"><code>TiffImages.save</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/dense.jl#L3-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TiffImages.LazyBufferedTIFF" href="#TiffImages.LazyBufferedTIFF"><code>TiffImages.LazyBufferedTIFF</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct LazyBufferedTIFF{T&lt;:Union{Colorant, TiffImages.WidePixel}, O&lt;:Unsigned, AA&lt;:AbstractArray} &lt;: TiffImages.AbstractDenseTIFF{T&lt;:Union{Colorant, TiffImages.WidePixel}, 3}</code></pre><p>A type to represent lazily-loaded TIFF data, returned by <code>TiffImages.load(filepath; lazyio=true)</code>. Useful for opening and operating on images too large to store in memory, and for incrementally writing new TIFF files.</p><p>This works by buffering individual slices. This allows broad format support, including compressed TIFFs, but with mixed performance depending on your specific access (indexing) patterns. See discussion in the package documentation, and <a href="#TiffImages.MmappedTIFF"><code>MmappedTIFF</code></a> for an alternative with different strengths and weaknesses.</p><pre><code class="language-julia-repl hljs">julia&gt; using TiffImages, ColorTypes

julia&gt; img = empty(LazyBufferedTIFF, Gray{Float32}, joinpath(mktempdir(), &quot;test.tif&quot;))
32-bit LazyBufferedTIFF{Gray{Float32}} 0×0×0 (writable)
    Current file size on disk:   8 bytes
    Addressable space remaining: 4.000 GiB

julia&gt; close(img) # when you&#39;re done, close the stream</code></pre><ul><li><code>file</code>: Pointer to keep track of the backing file</li></ul><ul><li><code>ifds</code>: The associated tags for each slice in this array</li></ul><ul><li><p><code>dims</code></p></li><li><p><code>working_cache</code>: An internal cache to fill reading from disk</p></li></ul><ul><li><code>cache</code>: An internal cache to fill with fully transformed data</li></ul><ul><li><code>cache_index</code>: The index of the currently loaded slice</li></ul><ul><li><code>last_ifd_offset</code>: Position of last loaded IFD, updated whenever a slice is appended</li></ul><ul><li><code>readonly</code>: A flag tracking whether this file is editable</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/lazy.jl#L1-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TiffImages.MmappedTIFF" href="#TiffImages.MmappedTIFF"><code>TiffImages.MmappedTIFF</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct MmappedTIFF{T&lt;:Union{Colorant, TiffImages.WidePixel}, N, O&lt;:Unsigned, A&lt;:AbstractArray{T&lt;:Union{Colorant, TiffImages.WidePixel}, 2}} &lt;: TiffImages.AbstractTIFF{T&lt;:Union{Colorant, TiffImages.WidePixel}, N}</code></pre><p>A type to represent memory-mapped TIFF data, returned by <code>TiffImages.load(filepath; mmap=true)</code>. Useful for opening and operating on images too large to store in memory.</p><p>This works by exploiting the operating system&#39;s memory-mapping capabilities. This is not compatible with certain TIFF options, including compression, but when applicable it gives good performance for most access (indexing) patterns. See discussion in the package documentation, and <a href="#TiffImages.LazyBufferedTIFF"><code>LazyBufferedTIFF</code></a> for an alternative with different strengths and weaknesses.</p><pre><code class="nohighlight hljs">julia&gt; using TiffImages

julia&gt; img = TiffImages.load(filepath; mmap=true);

julia&gt; print(summary(img))
200×541 TiffImages.MmappedTIFF{RGBA{N0f8}, 2}</code></pre><p>Fields:</p><ul><li><code>chunks</code>: 2d slices in the file</li></ul><ul><li><code>ifds</code>: The associated tags for each slice in this array</li></ul><ul><li><code>sz2</code>: The 2d slice size</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tlnagy/TiffImages.jl/blob/2255df51ace38662368d4c378db53224cb8d43c2/src/types/mmapped.jl#L1-L25">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../demos/">« Demos</a><a class="docs-footer-nextpage" href="../extend/">Overview »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Sunday 26 January 2025 22:20">Sunday 26 January 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
